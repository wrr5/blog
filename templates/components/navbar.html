{{define "navbar"}}
{{template "bgc" .}}
<link rel="stylesheet" href="/static/css/style.css">
<nav class="navbar navbar-expand-lg bg-body-tertiary bg-dark" data-bs-theme="dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <img src="/static/images/favicon.ico" alt="Logo" width="30" height="30" style="margin-bottom: 5px;">
            <span style="color: azure;font-weight: 600;text-shadow: 0 1px 2px rgba(0,0,0,0.3);font-size: 1.2rem;letter-spacing: 0.5px;">猪博客</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- 左侧导航项 -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link {{ if eq .CurrentURL "/home" }}active{{ end }}" href="/home">我的文章</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{ if eq .CurrentURL "/about" }}active{{ end }}" href="/about">关于</a>
                </li>
            </ul>

            <!-- 右侧导航项 -->
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item mb-1">
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="输入标题或内容..." aria-label="Search" />
                        <button class="btn btn-outline-primary" type="submit" style="min-width: 80px;">搜索</button>
                    </form>
                </li>
                {{if .user.Email}}
                {{if .user.IsAdmin}}
                <li class="nav-item mb-1">
                    <a class="btn btn-outline-info" href="/admin" style="margin-left: 5px;">管理后台</a>
                </li>
                {{end}}
                <li class="nav-item mb-1">
                    <a class="btn btn-outline-danger" href="/auth/logout" style="margin-left: 5px; margin-top: 2px;">退出登录</a>
                </li>
                {{else}}
                <li class="nav-item mb-1">
                    <a class="btn btn-outline-success" href="/auth/login" style="margin-left: 5px;">登录</a>
                </li>
                {{end}}
            </ul>
        </div>
    </div>
</nav>
{{end}}

{{define "navbar-admin"}}
{{template "bgc" .}}
<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    
    /* 移动端：垂直布局 */
    @media (max-width: 991.98px) {
        body {
            flex-direction: column !important;
        }
    }
    
    /* 桌面端：水平布局 */
    @media (min-width: 992px) {
        body {
            flex-direction: row !important;
        }
    }
</style>
<link rel="stylesheet" href="/static/css/style.css">

<!-- 移动端顶部导航栏 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark d-lg-none fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/admin">
            <img src="/static/images/admin-logo.png" alt="Logo" width="30" height="30" class="rounded-circle me-2">
            <span>管理后台</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobileNavbar"
            aria-controls="mobileNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mobileNavbar">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link {{ if eq .CurrentPath "/admin/categories" }}active{{ end }}"
                        href="/admin/categories">
                        <i class="bi bi-tags me-2"></i>
                        文章类别管理
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{ if eq .CurrentPath "/admin/users" }}active{{ end }}" href="/admin/users">
                        <i class="bi bi-people me-2"></i>
                        用户管理
                    </a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/">
                        <i class="bi bi-house me-2"></i>
                        返回前台
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/auth/logout">
                        <i class="bi bi-box-arrow-right me-2"></i>
                        退出登录
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- 为移动端固定顶部导航栏预留空间 -->
<div class="d-lg-none" style="height: 60px;"></div>

<!-- 侧边导航栏 - 桌面端 -->
<div class="d-none d-lg-flex flex-column flex-shrink-0 p-3 bg-dark text-white" style="width: 260px; min-height: 100vh;">
    <a href="/admin" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        <img src="/static/images/admin-logo.png" alt="Logo" width="32" height="32" class="rounded-circle me-2">
        <span class="fs-4">管理后台</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
        <li>
            <a href="/admin/categories" class="nav-link text-white {{ if eq .CurrentPath "/admin/categories" }}active{{
                else }} {{ end }}">
                <i class="bi bi-tags me-2"></i>
                文章类别管理
            </a>
        </li>
        <li>
            <a href="/admin/users" class="nav-link text-white {{ if eq .CurrentPath "/admin/users" }}active{{ else }}
                {{ end }}">
                <i class="bi bi-people me-2"></i>
                用户管理
            </a>
        </li>
    </ul>
    <hr>
    <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1"
            data-bs-toggle="dropdown" aria-expanded="false">
            <img src="/static/images/favicon.ico" alt="用户头像" width="32" height="32" class="rounded-circle me-2">
            <strong>管理员</strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
            <li><a class="dropdown-item" href="/">返回前台</a></li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="/auth/logout">退出登录</a></li>
        </ul>
    </div>
</div>
{{end}}